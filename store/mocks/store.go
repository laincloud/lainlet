package mocks

import (
	"github.com/laincloud/lainlet/store"
	"github.com/stretchr/testify/mock"
	"golang.org/x/net/context"
	"time"
)

func init() {
	store.Register("mock", New)
}

func New(addrs []string) (store.Store, error) {
	s := new(Store)
	s.On("Get")
	return s, nil
}

// Store is an autogenerated mock type for the Store type
type Store struct {
	mock.Mock
}

// Close provides a mock function with given fields:
func (_m *Store) Close() {
	_m.Called()
}

// Delete provides a mock function with given fields: key, recursive
func (_m *Store) Delete(key string, recursive bool) error {
	ret := _m.Called(key, recursive)

	var r0 error
	if rf, ok := ret.Get(0).(func(string, bool) error); ok {
		r0 = rf(key, recursive)
	} else {
		r0 = ret.Error(0)
	}

	return r0
}

// Exists provides a mock function with given fields: key
func (_m *Store) Exists(key string) (bool, error) {
	ret := _m.Called(key)

	var r0 bool
	if rf, ok := ret.Get(0).(func(string) bool); ok {
		r0 = rf(key)
	} else {
		r0 = ret.Get(0).(bool)
	}

	var r1 error
	if rf, ok := ret.Get(1).(func(string) error); ok {
		r1 = rf(key)
	} else {
		r1 = ret.Error(1)
	}

	return r0, r1
}

// Get provides a mock function with given fields: key
func (_m *Store) Get(key string) (*store.KVPair, error) {
	ret := _m.Called(key)

	var r0 *store.KVPair
	if rf, ok := ret.Get(0).(func(string) *store.KVPair); ok {
		r0 = rf(key)
	} else {
		if ret.Get(0) != nil {
			r0 = ret.Get(0).(*store.KVPair)
		}
	}

	var r1 error
	if rf, ok := ret.Get(1).(func(string) error); ok {
		r1 = rf(key)
	} else {
		r1 = ret.Error(1)
	}

	return r0, r1
}

// GetTree provides a mock function with given fields: key
func (_m *Store) GetTree(key string) ([]*store.KVPair, error) {
	var pairs []*store.KVPair
	switch key {
	case "/lain/deployd/pod_groups":
		pairs = append(pairs, &store.KVPair{
			Key:       "/lain/deployd/pod_groups/ipaddr-client/ipaddr-client.web.web",
			Value:     []byte("{\"Spec\":{\"Name\":\"ipaddr-client.web.web\",\"Namespace\":\"ipaddr-client\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Pod\":{\"Name\":\"ipaddr-client.web.web\",\"Namespace\":\"ipaddr-client\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Network\":\"\",\"Containers\":[{\"Name\":\"\",\"Namespace\":\"\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Image\":\"registry.lain.local/ipaddr-client:release-1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-client\",\"LAIN_APP_RELEASE_VERSION=1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"LAIN_PROCNAME=web\",\"LAIN_DOMAIN=lain.test\"],\"User\":\"\",\"WorkingDir\":\"\",\"DnsSearch\":[\"ipaddr-client.lain\"],\"Volumes\":[],\"SystemVolumes\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CloudVolumes\":null,\"Command\":[\"python\",\"client.py\"],\"Entrypoint\":[],\"CpuLimit\":0,\"MemoryLimit\":33554432,\"Expose\":10000,\"LogConfig\":{\"Type\":\"\",\"Config\":null}}],\"Filters\":null,\"Dependencies\":[{\"PodName\":\"ipaddr-service.portal.portal-ipaddr\",\"Policy\":0},{\"PodName\":\"resource.ipaddr-resource.ipaddr-client.portal.portal-ipaddr-r\",\"Policy\":0}],\"Annotation\":\"{\\\"mountpoint\\\": [\\\"ipaddr-client.lain.local\\\", \\\"ipaddr-client.lain.test\\\", \\\"ipaddr-client.lain\\\"], \\\"https_only\\\": false}\",\"Stateful\":false,\"SetupTime\":0,\"KillTimeout\":10,\"PrevState\":{\"NodeName\":\"\",\"IPs\":null}},\"NumInstances\":1,\"RestartPolicy\":1},\"PrevState\":[{\"NodeName\":\"lain-test3\",\"IPs\":[\"172.20.0.168\"]}],\"Pods\":[{\"InstanceNo\":1,\"Containers\":[{\"Id\":\"bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075\",\"Runtime\":{\"AppArmorProfile\":\"\",\"Args\":[\"client.py\"],\"Config\":{\"AttachStderr\":false,\"AttachStdin\":false,\"AttachStdout\":false,\"Cmd\":[\"python\",\"client.py\"],\"CpuShares\":0,\"Cpuset\":\"\",\"Domainname\":\"\",\"Entrypoint\":[],\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-client\",\"LAIN_APP_RELEASE_VERSION=1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"LAIN_PROCNAME=web\",\"LAIN_DOMAIN=lain.test\",\"DEPLOYD_POD_INSTANCE_NO=1\",\"DEPLOYD_POD_NAME=ipaddr-client.web.web\",\"DEPLOYD_POD_NAMESPACE=ipaddr-client\",\"PATH=/usr/local/go/bin:/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"GO_VERSION=1.6.2\",\"NODEJS_VERSION=v5.10.1\",\"LANG=en_US.UTF-8\",\"LC_ALL=en_US.UTF-8\",\"GOPATH=/go\"],\"ExposedPorts\":{\"10000/tcp\":{}},\"Hostname\":\"bd927bd751dd\",\"Image\":\"registry.lain.local/ipaddr-client:release-1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"Labels\":{\"cc.bdp.lain.deployd.annotation\":\"{\\\"mountpoint\\\": [\\\"ipaddr-client.lain.local\\\", \\\"ipaddr-client.lain.test\\\", \\\"ipaddr-client.lain\\\"], \\\"https_only\\\": false}\",\"cc.bdp.lain.deployd.container_index\":\"0\",\"cc.bdp.lain.deployd.drift_count\":\"0\",\"cc.bdp.lain.deployd.instance_no\":\"1\",\"cc.bdp.lain.deployd.pg_name\":\"ipaddr-client.web.web\",\"cc.bdp.lain.deployd.pg_namespace\":\"ipaddr-client\",\"cc.bdp.lain.deployd.version\":\"0\",\"com.docker.swarm.affinities\":\"[\\\"cc.bdp.lain.deployd.pg_name!=~ipaddr-client.web.web\\\"]\",\"com.docker.swarm.id\":\"9216c3a90c1266fb637942a6e69dd4e87f0ae7dbe46716cc1a60a9e709689c79\",\"license\":\"GPLv2\",\"name\":\"CentOS Base Image\",\"vendor\":\"CentOS\"},\"MacAddress\":\"\",\"Memory\":0,\"MemorySwap\":0,\"NetworkDisabled\":false,\"OnBuild\":null,\"OpenStdin\":false,\"PortSpecs\":null,\"StdinOnce\":false,\"Tty\":false,\"User\":\"\",\"VolumeDriver\":\"\",\"Volumes\":{\"/etc/localtime\":{},\"/lain/entrypoint\":{}},\"WorkingDir\":\"/lain/app\"},\"Created\":\"2017-03-16T09:21:27.620762465Z\",\"Driver\":\"devicemapper\",\"ExecDriver\":\"\",\"ExecIDs\":null,\"HostConfig\":{\"Binds\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CapAdd\":null,\"CapDrop\":null,\"CgroupParent\":\"\",\"ContainerIDFile\":\"\",\"CpuShares\":0,\"CpusetCpus\":\"\",\"Devices\":null,\"Dns\":null,\"DnsSearch\":[\"ipaddr-client.lain\"],\"ExtraHosts\":null,\"IpcMode\":\"\",\"Links\":null,\"LxcConf\":null,\"Memory\":33554432,\"MemorySwap\":33554432,\"NetworkMode\":\"ipaddr-client\",\"PidMode\":\"\",\"PortBindings\":{\"10000/tcp\":[{\"HostIp\":\"\",\"HostPort\":\"\"}]},\"Privileged\":false,\"PublishAllPorts\":false,\"ReadonlyRootfs\":false,\"RestartPolicy\":{\"MaximumRetryCount\":0,\"Name\":\"\"},\"SecurityOpt\":null,\"VolumesFrom\":null,\"Ulimits\":null,\"LogConfig\":{\"Type\":\"syslog\",\"Config\":{\"syslog-address\":\"tcp://127.0.0.1:514\"}}},\"HostnamePath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/hostname\",\"HostsPath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/hosts\",\"Id\":\"bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075\",\"Image\":\"sha256:a0d3091b0e0e11a02b128733b05f666f5765cc92c4b4859d13a2fd931fda2ef2\",\"LogPath\":\"\",\"MountLabel\":\"system_u:object_r:svirt_sandbox_file_t:s0:c284,c702\",\"Name\":\"/ipaddr-client.web.web.v0-i1-d0\",\"NetworkSettings\":{\"Bridge\":\"\",\"Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"IPAddress\":\"\",\"IPPrefixLen\":0,\"IPv6Gateway\":\"\",\"LinkLocalIPv6Address\":\"\",\"LinkLocalIPv6PrefixLen\":0,\"MacAddress\":\"\",\"Ports\":{},\"Networks\":{\"ipaddr-client\":{\"Gateway\":\"10.131.0.72\",\"IPAddress\":\"172.20.0.168\"}}},\"Path\":\"python\",\"ProcessLabel\":\"system_u:system_r:svirt_lxc_net_t:s0:c284,c702\",\"ResolvConfPath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/resolv.conf\",\"RestartCount\":0,\"State\":{\"Dead\":false,\"Error\":\"\",\"ExitCode\":0,\"FinishedAt\":\"0001-01-01T00:00:00Z\",\"OOMKilled\":false,\"Paused\":false,\"Pid\":30753,\"Restarting\":false,\"Running\":true,\"StartedAt\":\"2017-03-16T09:21:41.592838578Z\"},\"Volumes\":null,\"VolumesRW\":null,\"Node\":{\"Name\":\"lain-test3\",\"ID\":\"WWGS:GPBE:Y6SD:C6LK:PKOS:7NIZ:6GRZ:XJUE:GKC4:O7KH:NNF6:YSD2\",\"Addr\":\"10.131.0.72:2375\",\"IP\":\"10.131.0.72\",\"Cpus\":4,\"Memory\":7933587456,\"Labels\":{\"kernelversion\":\"3.10.0-327.36.3.el7.x86_64\",\"operatingsystem\":\"CentOS Linux 7 (Core)\",\"storagedriver\":\"devicemapper\"}}},\"NodeName\":\"lain-test3\",\"NodeIp\":\"10.131.0.72\",\"ContainerIp\":\"172.20.0.168\",\"NodePort\":0,\"ContainerPort\":10000,\"Protocol\":\"tcp\"}],\"State\":2,\"LastError\":\"\",\"UpdatedAt\":\"2017-03-30T17:37:42.280984731+08:00\",\"DriftCount\":0,\"RestartCount\":5,\"RestartAt\":\"2017-01-13T19:09:49.569456217+08:00\"}],\"State\":2,\"LastError\":\"\",\"UpdatedAt\":\"2016-12-02T17:41:03.634064435+08:00\"}"),
			LastIndex: 1,
		})
	}
	return pairs, nil
}

// List provides a mock function with given fields: dir
func (_m *Store) List(dir string) ([]string, error) {
	ret := _m.Called(dir)

	var r0 []string
	if rf, ok := ret.Get(0).(func(string) []string); ok {
		r0 = rf(dir)
	} else {
		if ret.Get(0) != nil {
			r0 = ret.Get(0).([]string)
		}
	}

	var r1 error
	if rf, ok := ret.Get(1).(func(string) error); ok {
		r1 = rf(dir)
	} else {
		r1 = ret.Error(1)
	}

	return r0, r1
}

// Put provides a mock function with given fields: key, value
func (_m *Store) Put(key string, value []byte) error {
	ret := _m.Called(key, value)

	var r0 error
	if rf, ok := ret.Get(0).(func(string, []byte) error); ok {
		r0 = rf(key, value)
	} else {
		r0 = ret.Error(0)
	}

	return r0
}

// Watch provides a mock function with given fields: key, ctx, recursive, index
func (_m *Store) Watch(key string, ctx context.Context, recursive bool, index uint64) (<-chan *store.Event, error) {

	ch := make(chan *store.Event)

	switch key {
	case "/lain/deployd/pod_groups":
		go func() {
			defer close(ch)
			for i := 1;; i++ {
				time.Sleep(time.Second)
				ch <- &store.Event{
					Action:        2,
					Key:           "/lain/deployd/pod_groups/ipaddr-client/ipaddr-client.web.web",
					ModifiedIndex: uint64(i),
					Data: []*store.KVPair{
						{
							Key:       "/lain/deployd/pod_groups/ipaddr-client/ipaddr-client.web.web",
							Value:     []byte("{\"Spec\":{\"Name\":\"ipaddr-client.web.web\",\"Namespace\":\"ipaddr-client\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Pod\":{\"Name\":\"ipaddr-client.web.web\",\"Namespace\":\"ipaddr-client\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Network\":\"\",\"Containers\":[{\"Name\":\"\",\"Namespace\":\"\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Image\":\"registry.lain.local/ipaddr-client:release-1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-client\",\"LAIN_APP_RELEASE_VERSION=1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"LAIN_PROCNAME=web\",\"LAIN_DOMAIN=lain.test\"],\"User\":\"\",\"WorkingDir\":\"\",\"DnsSearch\":[\"ipaddr-client.lain\"],\"Volumes\":[],\"SystemVolumes\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CloudVolumes\":null,\"Command\":[\"python\",\"client.py\"],\"Entrypoint\":[],\"CpuLimit\":0,\"MemoryLimit\":33554432,\"Expose\":10000,\"LogConfig\":{\"Type\":\"\",\"Config\":null}}],\"Filters\":null,\"Dependencies\":[{\"PodName\":\"ipaddr-service.portal.portal-ipaddr\",\"Policy\":0},{\"PodName\":\"resource.ipaddr-resource.ipaddr-client.portal.portal-ipaddr-r\",\"Policy\":0}],\"Annotation\":\"{\\\"mountpoint\\\": [\\\"ipaddr-client.lain.local\\\", \\\"ipaddr-client.lain.test\\\", \\\"ipaddr-client.lain\\\"], \\\"https_only\\\": false}\",\"Stateful\":false,\"SetupTime\":0,\"KillTimeout\":10,\"PrevState\":{\"NodeName\":\"\",\"IPs\":null}},\"NumInstances\":1,\"RestartPolicy\":1},\"PrevState\":[{\"NodeName\":\"lain-test3\",\"IPs\":[\"172.20.0.168\"]}],\"Pods\":[{\"InstanceNo\":1,\"Containers\":[{\"Id\":\"bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075\",\"Runtime\":{\"AppArmorProfile\":\"\",\"Args\":[\"client.py\"],\"Config\":{\"AttachStderr\":false,\"AttachStdin\":false,\"AttachStdout\":false,\"Cmd\":[\"python\",\"client.py\"],\"CpuShares\":0,\"Cpuset\":\"\",\"Domainname\":\"\",\"Entrypoint\":[],\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-client\",\"LAIN_APP_RELEASE_VERSION=1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"LAIN_PROCNAME=web\",\"LAIN_DOMAIN=lain.test\",\"DEPLOYD_POD_INSTANCE_NO=1\",\"DEPLOYD_POD_NAME=ipaddr-client.web.web\",\"DEPLOYD_POD_NAMESPACE=ipaddr-client\",\"PATH=/usr/local/go/bin:/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"GO_VERSION=1.6.2\",\"NODEJS_VERSION=v5.10.1\",\"LANG=en_US.UTF-8\",\"LC_ALL=en_US.UTF-8\",\"GOPATH=/go\"],\"ExposedPorts\":{\"10000/tcp\":{}},\"Hostname\":\"bd927bd751dd\",\"Image\":\"registry.lain.local/ipaddr-client:release-1462784181-9948592a0612d2ff551eb87e42bde6e091c47584\",\"Labels\":{\"cc.bdp.lain.deployd.annotation\":\"{\\\"mountpoint\\\": [\\\"ipaddr-client.lain.local\\\", \\\"ipaddr-client.lain.test\\\", \\\"ipaddr-client.lain\\\"], \\\"https_only\\\": false}\",\"cc.bdp.lain.deployd.container_index\":\"0\",\"cc.bdp.lain.deployd.drift_count\":\"0\",\"cc.bdp.lain.deployd.instance_no\":\"1\",\"cc.bdp.lain.deployd.pg_name\":\"ipaddr-client.web.web\",\"cc.bdp.lain.deployd.pg_namespace\":\"ipaddr-client\",\"cc.bdp.lain.deployd.version\":\"0\",\"com.docker.swarm.affinities\":\"[\\\"cc.bdp.lain.deployd.pg_name!=~ipaddr-client.web.web\\\"]\",\"com.docker.swarm.id\":\"9216c3a90c1266fb637942a6e69dd4e87f0ae7dbe46716cc1a60a9e709689c79\",\"license\":\"GPLv2\",\"name\":\"CentOS Base Image\",\"vendor\":\"CentOS\"},\"MacAddress\":\"\",\"Memory\":0,\"MemorySwap\":0,\"NetworkDisabled\":false,\"OnBuild\":null,\"OpenStdin\":false,\"PortSpecs\":null,\"StdinOnce\":false,\"Tty\":false,\"User\":\"\",\"VolumeDriver\":\"\",\"Volumes\":{\"/etc/localtime\":{},\"/lain/entrypoint\":{}},\"WorkingDir\":\"/lain/app\"},\"Created\":\"2017-03-16T09:21:27.620762465Z\",\"Driver\":\"devicemapper\",\"ExecDriver\":\"\",\"ExecIDs\":null,\"HostConfig\":{\"Binds\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CapAdd\":null,\"CapDrop\":null,\"CgroupParent\":\"\",\"ContainerIDFile\":\"\",\"CpuShares\":0,\"CpusetCpus\":\"\",\"Devices\":null,\"Dns\":null,\"DnsSearch\":[\"ipaddr-client.lain\"],\"ExtraHosts\":null,\"IpcMode\":\"\",\"Links\":null,\"LxcConf\":null,\"Memory\":33554432,\"MemorySwap\":33554432,\"NetworkMode\":\"ipaddr-client\",\"PidMode\":\"\",\"PortBindings\":{\"10000/tcp\":[{\"HostIp\":\"\",\"HostPort\":\"\"}]},\"Privileged\":false,\"PublishAllPorts\":false,\"ReadonlyRootfs\":false,\"RestartPolicy\":{\"MaximumRetryCount\":0,\"Name\":\"\"},\"SecurityOpt\":null,\"VolumesFrom\":null,\"Ulimits\":null,\"LogConfig\":{\"Type\":\"syslog\",\"Config\":{\"syslog-address\":\"tcp://127.0.0.1:514\"}}},\"HostnamePath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/hostname\",\"HostsPath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/hosts\",\"Id\":\"bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075\",\"Image\":\"sha256:a0d3091b0e0e11a02b128733b05f666f5765cc92c4b4859d13a2fd931fda2ef2\",\"LogPath\":\"\",\"MountLabel\":\"system_u:object_r:svirt_sandbox_file_t:s0:c284,c702\",\"Name\":\"/ipaddr-client.web.web.v0-i1-d0\",\"NetworkSettings\":{\"Bridge\":\"\",\"Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"IPAddress\":\"\",\"IPPrefixLen\":0,\"IPv6Gateway\":\"\",\"LinkLocalIPv6Address\":\"\",\"LinkLocalIPv6PrefixLen\":0,\"MacAddress\":\"\",\"Ports\":{},\"Networks\":{\"ipaddr-client\":{\"Gateway\":\"10.131.0.72\",\"IPAddress\":\"172.20.0.168\"}}},\"Path\":\"python\",\"ProcessLabel\":\"system_u:system_r:svirt_lxc_net_t:s0:c284,c702\",\"ResolvConfPath\":\"/data/docker/containers/bd927bd751ddb56ddc0bfa4fc279a85c2a670e4f8819aa154e2446e197e04075/resolv.conf\",\"RestartCount\":0,\"State\":{\"Dead\":false,\"Error\":\"\",\"ExitCode\":0,\"FinishedAt\":\"0001-01-01T00:00:00Z\",\"OOMKilled\":false,\"Paused\":false,\"Pid\":30753,\"Restarting\":false,\"Running\":true,\"StartedAt\":\"2017-03-16T09:21:41.592838578Z\"},\"Volumes\":null,\"VolumesRW\":null,\"Node\":{\"Name\":\"lain-test3\",\"ID\":\"WWGS:GPBE:Y6SD:C6LK:PKOS:7NIZ:6GRZ:XJUE:GKC4:O7KH:NNF6:YSD2\",\"Addr\":\"10.131.0.72:2375\",\"IP\":\"10.131.0.72\",\"Cpus\":4,\"Memory\":7933587456,\"Labels\":{\"kernelversion\":\"3.10.0-327.36.3.el7.x86_64\",\"operatingsystem\":\"CentOS Linux 7 (Core)\",\"storagedriver\":\"devicemapper\"}}},\"NodeName\":\"lain-test3\",\"NodeIp\":\"10.131.0.72\",\"ContainerIp\":\"172.20.0.168\",\"NodePort\":0,\"ContainerPort\":10000,\"Protocol\":\"tcp\"}],\"State\":2,\"LastError\":\"\",\"UpdatedAt\":\"2017-03-30T17:37:42.280984731+08:00\",\"DriftCount\":0,\"RestartCount\":5,\"RestartAt\":\"2017-01-13T19:09:49.569456217+08:00\"}],\"State\":2,\"LastError\":\"\",\"UpdatedAt\":\"2016-12-02T17:41:03.634064435+08:00\"}"),
							LastIndex: uint64(i),
						},
					},
				}
			}
		}()
	case "/lain/config":
		go func() {
			defer close(ch)
			for i := 1;; i++ {
				time.Sleep(time.Second)
				ch <- &store.Event{
					Action:        2,
					Key:           "/lain/config/vips/0.0.0.0:80",
					ModifiedIndex: uint64(i),
					Data: []*store.KVPair{
						{
							Key:       "/lain/config/vips/0.0.0.0:80",
							Value:     []byte("{\"app\": \"webrouter\", \"proc\": \"worker\", \"ports\": [{\"dest\": \"80\", \"src\": \"80\", \"proto\": \"tcp\"}]}"),
							LastIndex: uint64(i),
						},
					},
				}
			}
		}()
	case "/lain/deployd/depends":
		go func() {
			defer close(ch)
			for i := 1;; i++ {
				time.Sleep(time.Second)
				ch <- &store.Event{
					Action:        2,
					Key:           "/lain/deployd/depends/specs/ipaddr-service.portal.portal-ipaddr",
					ModifiedIndex: uint64(i),
					Data: []*store.KVPair{
						{
							Key:       "/lain/deployd/depends/specs/ipaddr-service.portal.portal-ipaddr",
							Value:     []byte("{\"Name\":\"ipaddr-service.portal.portal-ipaddr\",\"Namespace\":\"ipaddr-service\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Network\":\"\",\"Containers\":[{\"Name\":\"\",\"Namespace\":\"\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Image\":\"registry.lain.local/ipaddr-service:release-1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-service\",\"LAIN_APP_RELEASE_VERSION=1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"LAIN_PROCNAME=portal-ipaddr\",\"LAIN_SERVICE_NAME=ipaddr\",\"LAIN_DOMAIN=lain.test\"],\"User\":\"\",\"WorkingDir\":\"\",\"DnsSearch\":[\"ipaddr-service.lain\"],\"Volumes\":[],\"SystemVolumes\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"Command\":[\"python\",\"proxy.py\"],\"Entrypoint\":[],\"CpuLimit\":0,\"MemoryLimit\":33554432,\"Expose\":10000,\"LogConfig\":{\"Type\":\"\",\"Config\":{}}}],\"Filters\":[],\"Dependencies\":[],\"Annotation\":\"{\\\"mountpoint\\\": [], \\\"https_only\\\": true, \\\"service_name\\\": \\\"ipaddr\\\"}\",\"Stateful\":false,\"SetupTime\":0,\"KillTimeout\":10,\"PrevState\":{\"NodeName\":\"\",\"IPs\":[]}}"),
							LastIndex: uint64(i),
						},
					},
				}
				ch <- &store.Event{
					Action:        2,
					Key:           "/lain/deployd/depends/pods/ipaddr-service.portal.portal-ipaddr",
					ModifiedIndex: uint64(i),
					Data: []*store.KVPair{
						{
							Key:       "/lain/deployd/depends/pods/ipaddr-service.portal.portal-ipaddr",
							Value:     []byte("{\"lain-test3\":{\"ipaddr-client\":{\"RefCount\":1,\"VerifyTime\":\"2017-03-31T16:22:42.287078564+08:00\",\"Spec\":{\"Name\":\"ipaddr-service.portal.portal-ipaddr-lain-test3-ipaddr-client\",\"Namespace\":\"ipaddr-service.portal.portal-ipaddr\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Network\":\"ipaddr-service.portal.portal-ipaddr_ipaddr-client\",\"Containers\":[{\"Name\":\"\",\"Namespace\":\"\",\"Version\":0,\"CreatedAt\":\"0001-01-01T00:00:00Z\",\"UpdatedAt\":\"0001-01-01T00:00:00Z\",\"Image\":\"registry.lain.local/ipaddr-service:release-1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-service\",\"LAIN_APP_RELEASE_VERSION=1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"LAIN_PROCNAME=portal-ipaddr\",\"LAIN_SERVICE_NAME=ipaddr\",\"LAIN_DOMAIN=lain.test\"],\"User\":\"\",\"WorkingDir\":\"\",\"DnsSearch\":[\"ipaddr-service.lain\"],\"Volumes\":[],\"SystemVolumes\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CloudVolumes\":null,\"Command\":[\"python\",\"proxy.py\"],\"Entrypoint\":[],\"CpuLimit\":0,\"MemoryLimit\":33554432,\"Expose\":10000,\"LogConfig\":{\"Type\":\"\",\"Config\":{}}}],\"Filters\":[],\"Dependencies\":[],\"Annotation\":\"{\\\"mountpoint\\\": [], \\\"https_only\\\": true, \\\"service_name\\\": \\\"ipaddr\\\"}\",\"Stateful\":false,\"SetupTime\":0,\"KillTimeout\":10,\"PrevState\":{\"NodeName\":\"lain-test3\",\"IPs\":[\"172.20.0.170\"]}},\"Pod\":{\"InstanceNo\":0,\"Containers\":[{\"Id\":\"7e46ac9af310ad0e5c6153b723015f7c1ebf97e8d4bc904f1cd4d680baf6bf4d\",\"Runtime\":{\"AppArmorProfile\":\"\",\"Args\":[\"proxy.py\"],\"Config\":{\"AttachStderr\":false,\"AttachStdin\":false,\"AttachStdout\":false,\"Cmd\":[\"python\",\"proxy.py\"],\"CpuShares\":0,\"Cpuset\":\"\",\"Domainname\":\"\",\"Entrypoint\":[],\"Env\":[\"TZ=Asia/Shanghai\",\"LAIN_APPNAME=ipaddr-service\",\"LAIN_APP_RELEASE_VERSION=1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"LAIN_PROCNAME=portal-ipaddr\",\"LAIN_SERVICE_NAME=ipaddr\",\"LAIN_DOMAIN=lain.test\",\"DEPLOYD_POD_INSTANCE_NO=0\",\"DEPLOYD_POD_NAME=ipaddr-service.portal.portal-ipaddr-lain-test3-ipaddr-client\",\"DEPLOYD_POD_NAMESPACE=ipaddr-service.portal.portal-ipaddr\",\"PATH=/usr/local/go/bin:/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"GO_VERSION=1.6.2\",\"NODEJS_VERSION=v5.10.1\",\"LANG=en_US.UTF-8\",\"LC_ALL=en_US.UTF-8\",\"GOPATH=/go\"],\"ExposedPorts\":{\"10000/tcp\":{}},\"Hostname\":\"7e46ac9af310\",\"Image\":\"registry.lain.local/ipaddr-service:release-1462790282-60f77d22799d8823ef771faef97897d60ca9c4b1\",\"Labels\":{\"cc.bdp.lain.deployd.annotation\":\"{\\\"mountpoint\\\": [], \\\"https_only\\\": true, \\\"service_name\\\": \\\"ipaddr\\\"}\",\"cc.bdp.lain.deployd.container_index\":\"0\",\"cc.bdp.lain.deployd.drift_count\":\"0\",\"cc.bdp.lain.deployd.instance_no\":\"0\",\"cc.bdp.lain.deployd.pg_name\":\"ipaddr-service.portal.portal-ipaddr-lain-test3-ipaddr-client\",\"cc.bdp.lain.deployd.pg_namespace\":\"ipaddr-service.portal.portal-ipaddr\",\"cc.bdp.lain.deployd.version\":\"0\",\"com.docker.swarm.affinities\":\"[\\\"cc.bdp.lain.deployd.pg_name!=~ipaddr-service.portal.portal-ipaddr-lain-test3-ipaddr-client\\\"]\",\"com.docker.swarm.constraints\":\"[\\\"node==lain-test3\\\"]\",\"com.docker.swarm.id\":\"6439b51a068e15c38318c5f2f5da83be2341cac17b8733c174ba49cce0fb6205\",\"license\":\"GPLv2\",\"name\":\"CentOS Base Image\",\"vendor\":\"CentOS\"},\"MacAddress\":\"\",\"Memory\":0,\"MemorySwap\":0,\"NetworkDisabled\":false,\"OnBuild\":null,\"OpenStdin\":false,\"PortSpecs\":null,\"StdinOnce\":false,\"Tty\":false,\"User\":\"\",\"VolumeDriver\":\"\",\"Volumes\":{\"/etc/localtime\":{},\"/lain/entrypoint\":{}},\"WorkingDir\":\"/lain/app\"},\"Created\":\"2017-03-16T09:21:41.649909875Z\",\"Driver\":\"devicemapper\",\"ExecDriver\":\"\",\"ExecIDs\":null,\"HostConfig\":{\"Binds\":[\"/data/lain/entrypoint:/lain/entrypoint:ro\",\"/etc/localtime:/etc/localtime:ro\"],\"CapAdd\":null,\"CapDrop\":null,\"CgroupParent\":\"\",\"ContainerIDFile\":\"\",\"CpuShares\":0,\"CpusetCpus\":\"\",\"Devices\":null,\"Dns\":null,\"DnsSearch\":[\"ipaddr-service.lain\"],\"ExtraHosts\":null,\"IpcMode\":\"\",\"Links\":null,\"LxcConf\":null,\"Memory\":33554432,\"MemorySwap\":33554432,\"NetworkMode\":\"ipaddr-service.portal.portal-ipaddr_ipaddr-client\",\"PidMode\":\"\",\"PortBindings\":{\"10000/tcp\":[{\"HostIp\":\"\",\"HostPort\":\"\"}]},\"Privileged\":false,\"PublishAllPorts\":false,\"ReadonlyRootfs\":false,\"RestartPolicy\":{\"MaximumRetryCount\":0,\"Name\":\"\"},\"SecurityOpt\":null,\"VolumesFrom\":null,\"Ulimits\":null,\"LogConfig\":{\"Type\":\"syslog\",\"Config\":{\"syslog-address\":\"tcp://127.0.0.1:514\"}}},\"HostnamePath\":\"/data/docker/containers/7e46ac9af310ad0e5c6153b723015f7c1ebf97e8d4bc904f1cd4d680baf6bf4d/hostname\",\"HostsPath\":\"/data/docker/containers/7e46ac9af310ad0e5c6153b723015f7c1ebf97e8d4bc904f1cd4d680baf6bf4d/hosts\",\"Id\":\"7e46ac9af310ad0e5c6153b723015f7c1ebf97e8d4bc904f1cd4d680baf6bf4d\",\"Image\":\"sha256:387a29c8d4b3b0d155bc98577a372191b40683995e1224448e3dc1efc0573225\",\"LogPath\":\"\",\"MountLabel\":\"system_u:object_r:svirt_sandbox_file_t:s0:c185,c612\",\"Name\":\"/ipaddr-service.portal.portal-ipaddr-lain-test3-ipaddr-client.v0-i0-d0\",\"NetworkSettings\":{\"Bridge\":\"\",\"Gateway\":\"\",\"GlobalIPv6Address\":\"\",\"GlobalIPv6PrefixLen\":0,\"IPAddress\":\"\",\"IPPrefixLen\":0,\"IPv6Gateway\":\"\",\"LinkLocalIPv6Address\":\"\",\"LinkLocalIPv6PrefixLen\":0,\"MacAddress\":\"\",\"Ports\":{},\"Networks\":{\"ipaddr-service.portal.portal-ipaddr_ipaddr-client\":{\"Gateway\":\"10.131.0.72\",\"IPAddress\":\"172.20.0.170\"}}},\"Path\":\"python\",\"ProcessLabel\":\"system_u:system_r:svirt_lxc_net_t:s0:c185,c612\",\"ResolvConfPath\":\"/data/docker/containers/7e46ac9af310ad0e5c6153b723015f7c1ebf97e8d4bc904f1cd4d680baf6bf4d/resolv.conf\",\"RestartCount\":0,\"State\":{\"Dead\":false,\"Error\":\"\",\"ExitCode\":0,\"FinishedAt\":\"0001-01-01T00:00:00Z\",\"OOMKilled\":false,\"Paused\":false,\"Pid\":31301,\"Restarting\":false,\"Running\":true,\"StartedAt\":\"2017-03-16T09:22:06.150723145Z\"},\"Volumes\":null,\"VolumesRW\":null,\"Node\":{\"Name\":\"lain-test3\",\"ID\":\"WWGS:GPBE:Y6SD:C6LK:PKOS:7NIZ:6GRZ:XJUE:GKC4:O7KH:NNF6:YSD2\",\"Addr\":\"10.131.0.72:2375\",\"IP\":\"10.131.0.72\",\"Cpus\":4,\"Memory\":7933587456,\"Labels\":{\"kernelversion\":\"3.10.0-327.36.3.el7.x86_64\",\"operatingsystem\":\"CentOS Linux 7 (Core)\",\"storagedriver\":\"devicemapper\"}}},\"NodeName\":\"lain-test3\",\"NodeIp\":\"10.131.0.72\",\"ContainerIp\":\"172.20.0.170\",\"NodePort\":0,\"ContainerPort\":10000,\"Protocol\":\"tcp\"}],\"State\":2,\"LastError\":\"\",\"UpdatedAt\":\"2017-03-31T16:22:38.82009751+08:00\",\"DriftCount\":0,\"RestartCount\":0,\"RestartAt\":\"0001-01-01T00:00:00Z\"}}}}"),
							LastIndex: uint64(i),
						},
					},
				}
			}
		}()
	}

	return ch, nil
}

// WatchTree provides a mock function with given fields: directory, ctx, index
func (_m *Store) WatchTree(directory string, ctx context.Context, index uint64) (<-chan *store.Event, error) {
	ret := _m.Called(directory, ctx, index)

	var r0 <-chan *store.Event
	if rf, ok := ret.Get(0).(func(string, context.Context, uint64) <-chan *store.Event); ok {
		r0 = rf(directory, ctx, index)
	} else {
		if ret.Get(0) != nil {
			r0 = ret.Get(0).(<-chan *store.Event)
		}
	}

	var r1 error
	if rf, ok := ret.Get(1).(func(string, context.Context, uint64) error); ok {
		r1 = rf(directory, ctx, index)
	} else {
		r1 = ret.Error(1)
	}

	return r0, r1
}
